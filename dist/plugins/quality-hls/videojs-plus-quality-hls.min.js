!function(e){"use strict";function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},t.apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var n=e.getComponent("SettingMenuItem"),i=function(e){function n(t,l){var n;return void 0===l&&(l={}),n=e.call(this,t,{name:"QualityItem",label:"Quality",icon:"vjs-icon-hd",entries:l.quality||[]})||this,n.entries.length||n.hide(),n.addClass("vjs-setting-quality"),n.levels=[],n.handleAllLevelsAdded(),n}l(n,e);var i=n.prototype;return i.handleAllLevelsAdded=function(){var e,t=this,l=this.player_.qualityLevels(),n=[];l.on("addqualitylevel",function(l){var i=l.qualityLevel;clearTimeout(e),n.push(i);var a=function(){t.levels=n.slice(0),t.player_.trigger("before-quality-setup",{levels:t.levels}),t.onAllLevelsAdded(),n=[]};e=setTimeout(a,10)})},i.onAllLevelsAdded=function(){var e=this,t=this.levels.map(function(t){var l=t.height;return{label:e.localize(l+"p"),value:l,defalut:!1}}).sort(function(e,t){return t.value-e.value}).concat({label:"Auto",value:"auto",defalut:!0});this.setEntries(t),this.show(),this.player_.trigger("quality")},i.update=function(l){e.prototype.update.call(this,l);var n=l.value;this.levels.forEach(function(e){e.enabled=e.height===n||"auto"===n}),this.player_.trigger("qualitychange",this.entries.reduce(function(e,l,i){return l.value===n?t({index:i},l):e},{}))},n}(n);e.registerComponent("QualityHlsItem",i),e.hook("setup",function(e){e.findChild("SettingMenu")[0].component.addChild(new i(e))})}(videojs);
