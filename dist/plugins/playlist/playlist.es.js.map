{"version":3,"file":"playlist.es.js","sources":["../../../source/Utils/List.js","../../../source/Plugin/Playlist/PlayNextSpinner.js","../../../source/Plugin/Playlist/BeforePlayNextLayer.js","../../../source/Plugin/Playlist/ToggleAutoPlayNext.js","../../../source/Plugin/Playlist/PrevNextButton.js","../../../source/Plugin/Playlist/CancelPlayNextEl.js","../../../source/Plugin/Playlist/Playlist.js"],"sourcesContent":["class List {\n  constructor(array, startIndex) {\n    this.values = array.slice(0);\n    this.index_ = startIndex || 0;\n    this.loop_ = true;\n  }\n\n  index(value) {\n    if (typeof value !== 'undefined') {\n      this.index_ = Math.max(0, Math.min(value, this.values.length - 1));\n    } else {\n      return this.index_;\n    }\n  }\n\n  loop(value) {\n    if (typeof value !== 'undefined') {\n      this.loop_ = !!value;\n    } else {\n      return this.loop_;\n    }\n  }\n\n  calc(steps) {\n    const newIndex = this.index_ + steps;\n    const length = this.values.length;\n\n    return this.loop_ ? (length + newIndex) % length : Math.max(0, Math.min(newIndex, length - 1));\n  }\n\n  step(steps) {\n    this.index_ = this.calc(steps);\n\n    return this.values[this.index_];\n  }\n\n  current() {\n    return this.values[this.index_];\n  }\n\n  next() {\n    return this.step(1);\n  }\n\n  prev() {\n    return this.step(-1);\n  }\n\n  ended() {\n    return this.index_ === this.values.length - 1;\n  }\n}\n\nexport default List;\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass PlayNextSpinner extends ClickableComponent {\n  buildCSSClass() {\n    return 'vjs-playnext-spinner';\n  }\n\n  createEl() {\n    const el = super.createEl('div', {\n      innerHTML: `\n        <div class=\"vjs-icon-placeholder vjs-icon-play\"></div>\n        <svg width=\"60\" height=\"60\" viewbox=\"0 0 60 60\">\n          <circle cx=\"30\" cy=\"30\" r=\"30\"/>\n          <path class=\"vjs-playnext-spinner-border\" fill=\"#FFF\" transform=\"translate(30, 30)\"/>\n          <circle id=\"donut\" cx=\"30\" cy=\"30\" r=\"27\"/>\n        </svg>\n      `\n    });\n\n    this.path = el.querySelector('path');\n\n    return el;\n  }\n\n  handleClick() {\n    this.player_.getChild('BeforePlayNextLayer').timeup();\n  }\n}\n\nPlayNextSpinner.prototype.controlText_ = 'PlayNext';\n\nvideojs.registerComponent('PlayNextSpinner', PlayNextSpinner);\n\nexport default PlayNextSpinner;\n","import videojs from 'video.js';\n\nimport './PlayNextSpinner';\n\nconst Component = videojs.getComponent('Component');\n\nclass BeforePlayNextLayer extends Component {\n  constructor(player, options) {\n    super(player, options);\n\n    this.addChild('PlayNextSpinner', {}, 2);\n    this.addChild(\n      'CancelPlayNextEl',\n      {\n        text: '&#10005;',\n        className: 'vjs-cancel-playnext-cross'\n      },\n      {},\n      2\n    );\n    this.addChild(\n      'CancelPlayNextEl',\n      {\n        text: 'Cancel',\n        className: 'vjs-cancel-playnext-button'\n      },\n      {},\n      2\n    );\n\n    this.originPoster = player.poster() || player.playlist.current().poster;\n    player.poster(this.getNext().poster);\n\n    // for user click on replay button or select another video\n    const dispose = this.dispose.bind(this);\n    const events = ['timeupdate', 'loadstart'];\n\n    player.one(events, dispose);\n    this.on('dispose', () => {\n      player.off(events, dispose);\n      player.removeClass('vjs-play-next-ready');\n    });\n\n    this.countdown(player.options_.playNextCountDown);\n\n    player.addClass('vjs-play-next-ready');\n  }\n\n  getNext() {\n    const playlist = this.player_.playlist;\n\n    this.next = playlist.values[playlist.calc(1)];\n\n    return this.next;\n  }\n\n  createEl() {\n    const title = this.getNext().title;\n\n    const el = videojs.dom.createEl('div', {\n      className: 'vjs-before-playnext'\n    });\n\n    this.contentEl_ = videojs.dom.createEl('div', {\n      className: 'vjs-before-playnext-content',\n      innerHTML: `\n        <div class=\"vjs-upnext-text\">${this.localize('Up Next')}</div>\n        <div class=\"vjs-playnext-title\">\n            <div>${title}</div>\n        </div>\n      `\n    });\n\n    el.appendChild(this.contentEl_);\n\n    return el;\n  }\n\n  countdown(count) {\n    if (typeof count === 'undefined') {\n      count = 10;\n    }\n\n    if (count == 0) {\n      this.timeup();\n      return false;\n    }\n\n    let _this = this,\n      a = 0,\n      p = Math.PI,\n      t = count;\n\n    t = (t / 360) * 1000;\n\n    (function draw() {\n      a++;\n      a %= 360;\n      let r = (a * p) / 180,\n        x = Math.sin(r) * 125,\n        y = Math.cos(r) * -125,\n        mid = a > 180 ? 1 : 0,\n        anim = 'M 0 0 v -125 A 125 125 1 ' + mid + ' 1 ' + x + ' ' + y + ' z';\n\n      _this.getChild('PlayNextSpinner').path.setAttribute('d', anim);\n\n      if (a === 0) {\n        _this.timeup();\n      } else {\n        _this.timer = setTimeout(draw, t);\n      }\n    })();\n  }\n\n  timeup() {\n    this.player_.playlist.next();\n    this.player_.playlist.play();\n    this.dispose();\n  }\n\n  cancel() {\n    this.player_.poster(this.originPoster);\n\n    return this;\n  }\n\n  dispose() {\n    clearTimeout(this.timer);\n\n    this.player_.removeChild(this);\n\n    super.dispose();\n  }\n}\n\nfunction playNext() {\n  const player = this.player_;\n  const { playlist } = player;\n  const haveNextVideo = playlist.loop() || !playlist.ended();\n\n  if (playlist.autoPlayNext() && haveNextVideo) {\n    const controlbar = player.getChild('ControlBar');\n    const index = player.children().indexOf(controlbar) - 1;\n\n    player.addChild('BeforePlayNextLayer', {}, index);\n  } else {\n    player.poster(playlist.current().poster || '');\n  }\n}\n\nvideojs.registerPlugin('playNext', playNext);\nvideojs.registerComponent('BeforePlayNextLayer', BeforePlayNextLayer);\n","import videojs from 'video.js';\n\nconst SettingMenuButton = videojs.getComponent('SettingMenuButton');\nconst SettingOnOffItem = videojs.getComponent('SettingOnOffItem');\n\nclass ToggleAutoPlayNext extends SettingOnOffItem {\n  constructor(player) {\n    super(player, {\n      name: 'ToggleAutoPlayNext',\n      label: 'Autoplay',\n      icon: 'vjs-icon-next-item'\n    });\n\n    this.updateVisibility();\n    this.addClass('vjs-setting-autoplay');\n\n    player.on('playlist', () => {\n      this.updateVisibility();\n      this.update(player.playlist.autoPlayNext_);\n    });\n\n    player.on('autoplaynext', (_, active) => {\n      this.update(active);\n    });\n  }\n\n  updateVisibility() {\n    const { playlist } = this.player_;\n\n    if (playlist && playlist.values.length > 1) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  update(active) {\n    super.update(active);\n\n    const { playlist } = this.player_;\n\n    if (playlist.autoPlayNext_ !== this.active) {\n      this.player_.playlist.autoPlayNext(this.active);\n    }\n  }\n}\n\nvideojs.registerComponent('ToggleAutoPlayNext', ToggleAutoPlayNext);\n\nSettingMenuButton.prototype.options_.entries.splice(0, 0, 'ToggleAutoPlayNext');\n\nexport default ToggleAutoPlayNext;\n","import videojs from 'video.js';\n\nconst Button = videojs.getComponent('Button');\n\nclass PrevNextButton extends Button {\n  constructor(player, options) {\n    super(player, options);\n\n    this.updateVisibility();\n    this.controlText(options.controlText);\n\n    player.on('playlist', this.updateVisibility.bind(this));\n  }\n\n  buildCSSClass() {\n    return `${this.options_.className} ${super.buildCSSClass()}`;\n  }\n\n  updateVisibility() {\n    const playlist = this.player_.playlist;\n\n    if (playlist && playlist.values.length > 1) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  createEl(tag, _, attributes) {\n    return super.createEl(\n      tag,\n      {\n        innerHTML: `<span aria-hidden=\"true\" class=\"vjs-icon-placeholder ${this.options_.icon}\"></span>`\n      },\n      attributes\n    );\n  }\n\n  handleClick() {\n    // prev / next\n    const type = this.options_.controlText.toLowerCase();\n\n    this.player_.playlist[type]();\n    this.player_.playlist.play();\n  }\n}\n\nconst ControlBar = videojs.getComponent('ControlBar');\nconst children = ControlBar.prototype.options_.children;\nconst indexOfPlayToggle = children.indexOf('PlayToggle');\n\nif (indexOfPlayToggle !== -1) {\n  children.splice(0, 0, {\n    name: 'PrevNextButton',\n    className: 'vjs-prev-control',\n    icon: 'vjs-icon-previous-item',\n    controlText: 'Prev'\n  });\n\n  children.splice(indexOfPlayToggle + 2, 0, {\n    name: 'PrevNextButton',\n    className: 'vjs-next-control',\n    icon: 'vjs-icon-next-item',\n    controlText: 'Next'\n  });\n}\n\nvideojs.registerComponent('PrevNextButton', PrevNextButton);\n\nexport default PrevNextButton;\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass CancelPlayNextEl extends ClickableComponent {\n  constructor(player, options) {\n    super(player, options);\n\n    this.el_.querySelector('.vjs-icon-placeholder').innerHTML = this.localize(options.text);\n  }\n\n  buildCSSClass() {\n    return `vjs-cancel-playnext ${this.options_.className}`;\n  }\n\n  handleClick() {\n    this.player_\n      .getChild('BeforePlayNextLayer')\n      .cancel()\n      .dispose();\n  }\n}\n\nCancelPlayNextEl.prototype.controlText_ = 'Cancel PlayNext';\n\nvideojs.registerComponent('CancelPlayNextEl', CancelPlayNextEl);\n\nexport default CancelPlayNextEl;\n","import videojs from 'video.js';\nimport List from '../../Utils/List.js';\n\nimport './BeforePlayNextLayer.js';\nimport './ToggleAutoPlayNext.js';\nimport './PrevNextButton.js';\nimport './CancelPlayNextEl.js';\n\nimport './Playlist.scss';\n\nclass PlayList extends List {\n  constructor(player, array, startIndex = 0) {\n    super(array, startIndex);\n\n    this.player_ = player;\n\n    this.loadPoster_ = true;\n\n    this.autoPlayNext_ = true;\n\n    this.play(startIndex);\n\n    player.off('ended', player.playNext);\n    player.on('ended', player.playNext);\n  }\n\n  autoPlayNext(value) {\n    if (typeof value !== 'undefined') {\n      this.autoPlayNext_ = !!value;\n    } else {\n      return this.autoPlayNext_;\n    }\n\n    this.player_.trigger('autoplaynext', this.autoPlayNext_);\n  }\n\n  play(index) {\n    if (typeof index !== 'undefined') {\n      this.index(index);\n    }\n\n    const current = this.current();\n    const { poster, sources, title } = current;\n    const player = this.player_;\n    const addPoster = () => {\n      player.poster(poster || '');\n    };\n\n    player.title('');\n    player.poster('');\n\n    if (this.loadPoster_) {\n      this.loadPoster_ = false;\n\n      // For Safari, poster will not hidden when video playing\n      if (player.autoplay()) {\n        player.one('autoplay-failure', addPoster);\n      } else {\n        addPoster();\n      }\n    } else {\n      player.one('loadedmetadata', () => {\n        player.play();\n      });\n    }\n\n    if (player.preload() !== 'none') {\n      player.addClass('vjs-waiting');\n      player.one('loadedmetadata', () => {\n        player.removeClass('vjs-waiting');\n      });\n    }\n\n    player.src(sources);\n    player.title(title || '');\n\n    player.trigger('playlistchange', {\n      ...current,\n      index: this.index()\n    });\n  }\n}\n\nvideojs.registerPlugin('setPlayList', function(playlist, startIndex) {\n  const player = this.player_;\n\n  player.playlist = new PlayList(player, playlist, startIndex);\n\n  player.trigger('playlist', playlist);\n});\n\nvideojs.hook('setup', vjsPlayer => {\n  const { playlist } = vjsPlayer.options_;\n\n  if (playlist && playlist.length) {\n    const startIndex = playlist.findIndex(v => v.default);\n\n    vjsPlayer.setPlayList(playlist, startIndex);\n  }\n});\n"],"names":["List","array","startIndex","values","slice","index_","loop_","index","value","Math","max","min","length","loop","calc","steps","newIndex","step","current","next","prev","ended","ClickableComponent","videojs","getComponent","PlayNextSpinner","buildCSSClass","createEl","el","innerHTML","path","querySelector","handleClick","player_","getChild","timeup","prototype","controlText_","registerComponent","Component","BeforePlayNextLayer","player","options","addChild","text","className","originPoster","poster","playlist","getNext","dispose","bind","events","one","on","off","removeClass","countdown","options_","playNextCountDown","addClass","title","dom","contentEl_","localize","appendChild","count","_this","a","p","PI","t","draw","r","x","sin","y","cos","mid","anim","setAttribute","timer","setTimeout","play","cancel","clearTimeout","removeChild","playNext","haveNextVideo","autoPlayNext","controlbar","children","indexOf","registerPlugin","SettingMenuButton","SettingOnOffItem","ToggleAutoPlayNext","name","label","icon","updateVisibility","update","autoPlayNext_","_","active","show","hide","entries","splice","Button","PrevNextButton","controlText","tag","attributes","type","toLowerCase","ControlBar","indexOfPlayToggle","CancelPlayNextEl","el_","PlayList","loadPoster_","trigger","sources","addPoster","autoplay","preload","src","hook","vjsPlayer","findIndex","v","setPlayList"],"mappings":"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"}