{"version":3,"file":"live.es.js","sources":["../../../source/Plugin/Live/LiveNotice.js","../../../source/Plugin/Live/Live.js"],"sourcesContent":["import videojs from 'video.js';\n\nconst Component = videojs.getComponent('Component');\n\nclass LiveNotice extends Component {\n  createEl() {\n    const el = videojs.dom.createEl('div', {\n      className: 'vjs-live-notice',\n      innerHTML: `\n        <div class=\"vjs-live-notice-spot vjs-icon-circle\"></div>\n        Live\n      `\n    });\n\n    return el;\n  }\n}\n\nvideojs.registerComponent('LiveNotice', LiveNotice);\n\nexport default LiveNotice;\n","import videojs from 'video.js';\nimport LiveNotice from './LiveNotice';\nimport './Live.scss';\n\nconst Plugin = videojs.getPlugin('plugin');\n\nclass Live extends Plugin {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.createLiveNotive(player);\n\n    this.start(player);\n  }\n\n  createLiveNotive(player) {\n    const { parent, index } = player.findChild('DurationDisplay')[0];\n    const noticeEl = new LiveNotice(player);\n\n    parent.addChild(noticeEl, {}, index);\n\n    this.on('dispose', () => {\n      parent.removeChild(noticeEl);\n    });\n  }\n\n  start(player) {\n    const onTimeupdate = this.onTimeUpdate.bind(this);\n\n    player.addClass('vjs-live-streaming');\n    player.on('timeupdate', onTimeupdate);\n\n    this.on('dispose', () => {\n      player.off('timeupdate', onTimeupdate);\n      player.removeClass('vjs-live-streaming');\n      player.removeClass('vjs-live');\n    });\n  }\n\n  onTimeUpdate() {\n    const player = this.player;\n    const duration = player.duration();\n\n    if (duration === Infinity || player.currentTime() >= duration) {\n      player.addClass('vjs-live');\n    } else {\n      player.removeClass('vjs-live');\n    }\n  }\n}\n\nvideojs.registerPlugin('live', Live);\n"],"names":["Component","videojs","getComponent","LiveNotice","createEl","el","dom","className","innerHTML","registerComponent","Plugin","getPlugin","Live","player","options","createLiveNotive","start","findChild","parent","index","noticeEl","addChild","on","removeChild","onTimeupdate","onTimeUpdate","bind","addClass","off","removeClass","duration","Infinity","currentTime","registerPlugin"],"mappings":";;;;;;;;;AAEA,IAAMA,SAAS,GAAGC,OAAO,CAACC,YAAR,CAAqB,WAArB,CAAlB;;IAEMC;;;;;;;;;;;SACJC,WAAA,oBAAW;QACHC,EAAE,GAAGJ,OAAO,CAACK,GAAR,CAAYF,QAAZ,CAAqB,KAArB,EAA4B;MACrCG,SAAS,EAAE,iBAD0B;MAErCC,SAAS;KAFA,CAAX;WAQOH,EAAP;;;;EAVqBL;;AAczBC,OAAO,CAACQ,iBAAR,CAA0B,YAA1B,EAAwCN,UAAxC;;ACdA,IAAMO,MAAM,GAAGT,OAAO,CAACU,SAAR,CAAkB,QAAlB,CAAf;;IAEMC;;;;;gBACQC,MAAZ,EAAoBC,OAApB,EAAkC;;;QAAdA,OAAc;MAAdA,OAAc,GAAJ,EAAI;;;+BAC1BD,MAAN,EAAcC,OAAd;;UAEKC,gBAAL,CAAsBF,MAAtB;;UAEKG,KAAL,CAAWH,MAAX;;;;;;;SAGFE,mBAAA,0BAAiBF,MAAjB,EAAyB;6BACGA,MAAM,CAACI,SAAP,CAAiB,iBAAjB,EAAoC,CAApC,CADH;QACfC,MADe,sBACfA,MADe;QACPC,KADO,sBACPA,KADO;QAEjBC,QAAQ,GAAG,IAAIjB,UAAJ,CAAeU,MAAf,CAAjB;IAEAK,MAAM,CAACG,QAAP,CAAgBD,QAAhB,EAA0B,EAA1B,EAA8BD,KAA9B;SAEKG,EAAL,CAAQ,SAAR,EAAmB,YAAM;MACvBJ,MAAM,CAACK,WAAP,CAAmBH,QAAnB;KADF;;;SAKFJ,QAAA,eAAMH,MAAN,EAAc;QACNW,YAAY,GAAG,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAArB;IAEAb,MAAM,CAACc,QAAP,CAAgB,oBAAhB;IACAd,MAAM,CAACS,EAAP,CAAU,YAAV,EAAwBE,YAAxB;SAEKF,EAAL,CAAQ,SAAR,EAAmB,YAAM;MACvBT,MAAM,CAACe,GAAP,CAAW,YAAX,EAAyBJ,YAAzB;MACAX,MAAM,CAACgB,WAAP,CAAmB,oBAAnB;MACAhB,MAAM,CAACgB,WAAP,CAAmB,UAAnB;KAHF;;;SAOFJ,eAAA,wBAAe;QACPZ,MAAM,GAAG,KAAKA,MAApB;QACMiB,QAAQ,GAAGjB,MAAM,CAACiB,QAAP,EAAjB;;QAEIA,QAAQ,KAAKC,QAAb,IAAyBlB,MAAM,CAACmB,WAAP,MAAwBF,QAArD,EAA+D;MAC7DjB,MAAM,CAACc,QAAP,CAAgB,UAAhB;KADF,MAEO;MACLd,MAAM,CAACgB,WAAP,CAAmB,UAAnB;;;;;EAxCanB;;AA6CnBT,OAAO,CAACgC,cAAR,CAAuB,MAAvB,EAA+BrB,IAA/B"}