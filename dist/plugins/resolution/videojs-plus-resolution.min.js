!function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var n=function(){function t(t,e){this.values=t.slice(0),this.index_=e||0,this.loop_=!0}var e=t.prototype;return e.index=function(t){if(void 0===t)return this.index_;this.index_=Math.max(0,Math.min(t,this.values.length-1))},e.loop=function(t){if(void 0===t)return this.loop_;this.loop_=!!t},e.calc=function(t){var e=this.index_+t,n=this.values.length;return this.loop_?(n+e)%n:Math.max(0,Math.min(e,n-1))},e.step=function(t){return this.index_=this.calc(t),this.values[this.index_]},e.current=function(){return this.values[this.index_]},e.next=function(){return this.step(1)},e.prev=function(){return this.step(-1)},e.ended=function(){return this.index_===this.values.length-1},t}(),i=t.getComponent("SettingMenuItem"),o=function(t){function n(e,n){var i;return void 0===n&&(n={}),i=t.call(this,e,{name:"ResolutionItem",label:"Resolution",icon:"vjs-icon-hd",entries:n.resolution||[]})||this,i.entries.length||i.hide(),i.addClass("vjs-setting-resolution"),i}return e(n,t),n.prototype.update=function(e){t.prototype.update.call(this,e),this.player_.resolution.pick(e.value)},n}(i);t.registerComponent("ResolutionItem",o),t.hook("setup",function(t){t.findChild("SettingMenu")[0].component.addChild(new o(t))});var s=function(t){function n(e,n,i){var o;return void 0===i&&(i=0),o=t.call(this,n,i)||this,o.player=e,o.pick(i),o}return e(n,t),n.prototype.pick=function(t){void 0!==t&&this.index(t);var e=this.current();this.player.src(e.sources),this.player.trigger("resolutionchange",Object.assign(e,{index:this.index()}))},n}(n),r=function(t){var e=this.player_,n=e.findChild("ResolutionItem")[0].component;e.resolution=new s(e,t),n.setEntries(t.map(function(t,e){return{label:t.label,value:e,defalut:t.default}})),n.show(),e.trigger("resolution")};t.registerPlugin("setResolution",r),t.hook("setup",function(t){var e=t.options_.resolution||[];e.length&&t.setResolution(e)})}(videojs);
