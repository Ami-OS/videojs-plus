!function(t){"use strict";function i(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var e=function(){function t(t,i){this.values=t.slice(0),this.index_=i||0,this.loop_=!0}var i=t.prototype;return i.index=function(t){if(void 0===t)return this.index_;this.index_=Math.max(0,Math.min(t,this.values.length-1))},i.loop=function(t){if(void 0===t)return this.loop_;this.loop_=!!t},i.calc=function(t){var i=this.index_+t,e=this.values.length;return this.loop_?(e+i)%e:Math.max(0,Math.min(i,e-1))},i.step=function(t){return this.index_=this.calc(t),this.values[this.index_]},i.current=function(){return this.values[this.index_]},i.next=function(){return this.step(1)},i.prev=function(){return this.step(-1)},i.ended=function(){return this.index_===this.values.length-1},t}(),n=t.getComponent("SettingMenuItem"),o=function(t){function e(i,e){var n;return void 0===e&&(e={}),n=t.call(this,i,{name:"QualityItem",label:"Quality",icon:"vjs-icon-hd",entries:e.quality||[]})||this,n.entries.length||n.hide(),n.addClass("vjs-setting-quality"),n}return i(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i),this.player_.quality.pick(i.value)},e}(n);t.registerComponent("QualityItem",o),t.hook("setup",function(t){t.findChild("SettingMenu")[0].component.addChild(new o(t))});var r=function(t){function e(i,e,n){var o;return void 0===n&&(n=0),o=t.call(this,e,n)||this,o.player=i,o.pick(n),o}return i(e,t),e.prototype.pick=function(t){void 0!==t&&this.index(t);var i=this.current();this.player.src(i.sources),this.player.trigger("qualitychange",Object.assign(i,{index:this.index()}))},e}(e),u=function(t){var i=this.player_,e=i.findChild("QualityItem")[0].component;i.quality=new r(i,t),e.setEntries(t.map(function(t,i){return{label:t.label,value:i,defalut:t.default}})),e.show(),i.trigger("quality")};t.registerPlugin("setQuality",u),t.hook("setup",function(t){var i=t.options_.quality||[];i.length&&t.setQuality(i)})}(videojs);
