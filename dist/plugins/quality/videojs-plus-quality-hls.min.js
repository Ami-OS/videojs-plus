!function(e){"use strict";function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i])}return e},t.apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i=e.getComponent("SettingMenuItem"),n=function(e){function i(t,l){var i;return void 0===l&&(l={}),i=e.call(this,t,{name:"QualityItem",label:"Quality",icon:"vjs-icon-hd",entries:l.quality||[]})||this,i.entries.length||i.hide(),i.addClass("vjs-setting-quality"),i.levels=[],i.handleAllLevelsAdded(),i}l(i,e);var n=i.prototype;return n.handleAllLevelsAdded=function(){var e,t=this,l=this.player_.qualityLevels(),i=[];l.on("addqualitylevel",function(l){var n=l.qualityLevel;clearTimeout(e),i.push(n);var r=function(){t.levels=i.slice(0),t.player_.trigger("before-quality-setup",{levels:t.levels}),t.onAllLevelsAdded(),i=[]};e=setTimeout(r,10)})},n.onAllLevelsAdded=function(){var e=this,t=this.levels.map(function(t){var l=t.height;return{label:e.localize(l+"p"),value:l,defalut:!1}}).sort(function(e,t){return t.value-e.value}).concat({label:"Auto",value:"auto",defalut:!0});this.setEntries(t),this.show(),this.player_.trigger("quality")},n.update=function(l){e.prototype.update.call(this,l);var i=l.value;this.levels.forEach(function(e){e.enabled=e.height===i||"auto"===i}),this.player_.trigger("qualitychange",this.entries.reduce(function(e,l,n){return l.value===i?t({index:n},l):e},{}))},i}(i);e.registerComponent("QualityHlsItem",n),e.hook("setup",function(e){e.findChild("SettingMenu")[0].component.addChild(new n(e))});var r=require("videojs-contrib-quality-levels");e.registerPlugin("qualityLevels",r)}(videojs);
