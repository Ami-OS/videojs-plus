{"version":3,"file":"videojs-plus.es.js","sources":["../source/Utils/FindChild.js","../source/Player/Player.js","../source/Components/ControlBar/ControlBar.Mobile.js","../source/Components/ControlBar/Progress/Progress.js","../source/Components/ControlBar/ControlBar.js","../source/Components/Title/Title.js","../source/Components/PlayToggleLayer/PlayToggleLayer.js","../source/Utils/Listener.js","../source/Components/ContextMenu/Item/ContextMenuItem.js","../source/Components/ContextMenu/Item/ContextMenuToggleLoop.js","../source/Components/ContextMenu/Item/AboutThisPlayer.js","../source/Components/ContextMenu/CloseContextMenu.js","../source/Components/ContextMenu/ContextMenu.js","../source/Components/SettingMenu/CloseSettingMenu.js","../source/Components/SettingMenu/SettingMenu.js","../source/Components/SettingMenu/Item/SettingMenuItem.js","../source/Components/SettingMenu/Item/SettingOnOffItem.js","../source/Components/SettingMenu/Item/SettingSubOptionTitle.js","../source/Components/SettingMenu/Item/SettingSubOptionItem.js","../source/Components/SettingMenu/MenuDimension.js","../source/Components/SettingMenu/Item/SettingOptionItem.js","../source/Components/SettingMenu/PlaybackRate/PlaybackRateSettingItem.js","../source/Components/SettingMenu/SettingMenuButton.js"],"sourcesContent":["import videojs from 'video.js';\n\nfunction findChild(parent, name, result) {\n  const children = [];\n\n  if (parent && parent.childIndex_ && Object.keys(parent.childIndex_).length) {\n    for (let componentId in parent.childIndex_) {\n      const component = parent.childIndex_[componentId];\n\n      if (component && component.name_ == name) {\n        result.push({\n          parent,\n          component,\n          index: parent.children_.indexOf(component),\n          [name]: component\n        });\n      }\n\n      children.push(findChild(component, name, result));\n    }\n  }\n\n  return {\n    name,\n    parent,\n    children\n  };\n}\n\nvideojs.getComponent('Component').prototype.findChild = function(name) {\n  const result = [];\n\n  findChild(this, name, result);\n\n  return result;\n};\n","import videojs from 'video.js';\nimport './Player.scss';\n\nconst { IS_IPHONE, IOS_VERSION, TOUCH_ENABLED } = videojs.browser;\n\nvideojs.hook('setup', vjsPlayer => {\n  vjsPlayer.playsinline(vjsPlayer.options_.playsinline !== false);\n\n  vjsPlayer.addClass('video-js');\n\n  if (IS_IPHONE) {\n    vjsPlayer.addClass('vjs-is-iphone');\n    if (IOS_VERSION < 11) {\n      vjsPlayer.addClass('vjs-iphone-below-11');\n    }\n  }\n\n  TOUCH_ENABLED && vjsPlayer.removeClass('vjs-workinghover');\n});\n","import videojs from 'video.js';\n\nimport './ControlBar.Mobile.scss';\n\nconst Component = videojs.getComponent('Component');\nconst ControlBar = videojs.getComponent('ControlBar');\n\nclass ControlSeparator extends Component {\n  constructor(player, options) {\n    super(player, options);\n    this.addClass('vjs-control-separator');\n    this.addClass(options.className || '');\n  }\n}\n\nvideojs.registerComponent('ControlSeparator', ControlSeparator);\n\nvideojs.hook('beforesetup', (_, options) => {\n  const children = ControlBar.prototype.options_.children.slice(0);\n  const index = children.indexOf('CustomControlSpacer');\n\n  if (index > -1) {\n    ControlBar.prototype.options_.children = [\n      {\n        name: 'ControlSeparator',\n        className: 'top',\n        children: []\n      },\n      {\n        name: 'ControlSeparator',\n        className: 'middle',\n        children: children.splice(0, index + 1)\n      },\n      {\n        name: 'ControlSeparator',\n        className: 'bottom',\n        children: children\n      }\n    ];\n  }\n\n  return options;\n});\n\n// prevent control bar immediately shown\nvideojs.hook('setup', vjsPlayer => {\n  const enableMobileView = vjsPlayer.options_.mobileView !== false;\n\n  const matchDimension = value => {\n    return window.matchMedia ? window.matchMedia(`(max-width: ${value}px)`).matches : window.innerWidth <= value;\n  };\n\n  if (matchDimension(480) && enableMobileView) {\n    // Prevent control bar shown immediately after playing\n    vjsPlayer.controlBar.hide();\n    vjsPlayer.one('playing', () => {\n      // Show control bar after `userinactive` (depends on `inactivityTimeout`) or user action\n      const events = ['mouseover', 'userinactive', 'touchstart'];\n\n      vjsPlayer.one(events, function callback() {\n        vjsPlayer.off(events, callback);\n        vjsPlayer.controlBar.show();\n      });\n\n      // If player do not autoplay start,\n      // the first click to play action cause player inactive ( maybe a bug of videojs )\n      // Then clcik on the player before `inactivityTimeout`, the control bar will no shown as the player still inactive\n      // So we need to make sure player is active after second click\n      vjsPlayer.one('touchend', () => {\n        vjsPlayer.userActive(true);\n      });\n    });\n\n    vjsPlayer.addClass('vjs-mobile-view');\n  }\n});\n","import videojs from 'video.js';\n\nimport './Progress.scss';\n\nconst SeekBar = videojs.getComponent('SeekBar');\n\nSeekBar.prototype.getPercent = function getPercent() {\n  const time = this.player_.currentTime();\n  const percent = time / this.player_.duration();\n\n  return percent >= 1 ? 1 : percent;\n};\n\nSeekBar.prototype.handleMouseMove = function handleMouseMove(event) {\n  const player = this.player_;\n\n  // if (!videojs.dom.isSingleLeftClick(event) || isAdPlaying(player)) {\n  if (!videojs.dom.isSingleLeftClick(event)) {\n    return;\n  }\n\n  let newTime = this.calculateDistance(event) * player.duration();\n\n  if (newTime === player.duration()) {\n    newTime = newTime - 0.1;\n  }\n\n  player.currentTime(newTime);\n\n  this.update();\n};\n","import videojs from 'video.js';\nimport './ControlBar.Mobile';\n\nimport './Progress/Progress';\nimport './ControlBar.scss';\n\nvideojs.getComponent('ControlBar').prototype.options_.children = [\n  'PlayToggle',\n  'CustomControlSpacer',\n  'VolumePanel',\n  'CurrentTimeDisplay',\n  'TimeDivider',\n  'DurationDisplay',\n  'ProgressControl',\n  'CustomControlSpacer',\n  'SettingMenuButton',\n  'FullscreenToggle'\n];\n\nvideojs.hook('setup', vjsPlayer => {\n  vjsPlayer.on('mouseleave', function() {\n    vjsPlayer.userActive(false);\n  });\n\n  vjsPlayer.ready(function() {\n    vjsPlayer.controls(vjsPlayer.options_.controls !== false);\n  });\n});\n","import videojs from 'video.js';\n\nimport './Title.scss';\n\nclass Title extends videojs.getComponent('Component') {\n  constructor(player, options) {\n    super(player, options);\n\n    this.title_ = options.playerOptions.title || '';\n\n    this.update(this.title_);\n  }\n\n  createEl() {\n    const el = super.createEl('div', {\n      className: 'vjs-title'\n    });\n\n    this.contentEl_ = videojs.dom.createEl('div', {\n      className: 'vjs-title-field'\n    });\n\n    el.appendChild(this.contentEl_);\n\n    return el;\n  }\n\n  update(title_) {\n    if (!title_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n\n    this.player_.cache_.title = this.title_;\n    this.title_ = title_;\n\n    this.contentEl_.innerHTML = title_;\n  }\n}\n\nconst title = function(title_) {\n  const videoTitle = this.player_.getChild('VideoTitle');\n\n  if (typeof title_ === 'undefined') {\n    return videoTitle.title_;\n  }\n\n  videoTitle.update(title_);\n};\n\nvideojs.registerPlugin('title', title);\nvideojs.registerComponent('VideoTitle', Title);\n\nvideojs.getComponent('Player').prototype.options_.children.splice(2, 0, 'VideoTitle');\n","import videojs from 'video.js';\nimport './PlayToggleLayer.scss';\n\nconst PlayToggleButton = videojs.getComponent('PlayToggle');\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass PlayToggleLayer extends ClickableComponent {\n  createEl() {\n    return videojs.dom.createEl('div', {\n      className: 'vjs-play-toggle-layer'\n    });\n  }\n\n  handleClick(evt) {\n    if (this.player_.userActive() || this.player_.paused()) {\n      PlayToggleButton.prototype.handleClick.call(this, evt);\n    }\n  }\n}\n\nvideojs.registerComponent('PlayToggleLayer', PlayToggleLayer);\n\nconst playerChildren = videojs.getComponent('Player').prototype.options_.children;\nconst loadSpinnerIndex = playerChildren.indexOf('loadingSpinner');\n\nplayerChildren.splice(loadSpinnerIndex, 0, 'PlayToggleLayer');\n","export default (events, listener, target = window) => {\n  if (!Array.isArray(events)) {\n    events = [events];\n  }\n\n  events.forEach(evt => target.addEventListener(evt, listener));\n\n  return () => events.forEach(evt => target.removeEventListener(evt, listener));\n};\n","import videojs from 'video.js';\n\nconst MenuItem = videojs.getComponent('MenuItem');\n\nclass ContextMenuItem extends MenuItem {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      selectable: true\n    });\n\n    this.addClass('vjs-context-menu-item');\n\n    this.controlText(options.label);\n  }\n\n  createEl(...args) {\n    const el = super.createEl(...args);\n\n    el.insertAdjacentHTML(\n      'afterbegin',\n      `<span aria-hidden=\"true\" class=\"vjs-icon-placeholder ${this.options_.icon || ''}\"></span>`\n    );\n\n    return el;\n  }\n\n  handleClick() {\n    const { component: ContextMenu } = this.player_.findChild('ContextMenu')[0];\n\n    ContextMenu.hide();\n  }\n}\n\nvideojs.registerComponent('ContextMenuItem', ContextMenuItem);\n\nexport default ContextMenuItem;\n","import videojs from 'video.js';\nimport ContextMenuItem from './ContextMenuItem.js';\n\nclass ContextMenuToggleLoop extends ContextMenuItem {\n  constructor(player) {\n    super(player, {\n      name: 'ContextMenuToggleLoop',\n      label: 'Loop',\n      icon: 'vjs-icon-loop'\n    });\n\n    this.addClass('vjs-checkbox');\n\n    player.on('loadstart', this.update.bind(this));\n  }\n\n  update() {\n    this.selected(this.player_.loop());\n  }\n\n  handleClick() {\n    super.handleClick();\n\n    this.player_.loop(!this.player_.loop());\n\n    this.update();\n  }\n}\n\nvideojs.registerComponent('ContextMenuToggleLoop', ContextMenuToggleLoop);\n\nexport default ContextMenuToggleLoop;\n","import videojs from 'video.js';\nimport ContextMenuItem from './ContextMenuItem.js';\n\nclass AboutThisPlayer extends ContextMenuItem {\n  constructor(player) {\n    super(player, {\n      name: 'AboutThisPlayer',\n      label: 'About This Player',\n      icon: 'vjs-icon-github'\n    });\n  }\n\n  handleClick() {\n    super.handleClick();\n\n    window.open('https://github.com/Pong420/videojs-plus', '_blank');\n  }\n}\n\nvideojs.registerComponent('AboutThisPlayer', AboutThisPlayer);\n\nexport default AboutThisPlayer;\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\n// for mobile view\nclass CloseContextMenu extends ClickableComponent {\n  buildCSSClass() {\n    return 'vjs-close-menu-layer vjs-close-context-menu';\n  }\n\n  handleClick() {\n    this.options_.menu.hide();\n  }\n}\n\nvideojs.registerComponent('CloseContextMenu', CloseContextMenu);\n\nexport default CloseContextMenu;\n","import videojs from 'video.js';\nimport addEventListener from '../../Utils/Listener';\n\nimport './ContextMenu.scss';\nimport './Item/ContextMenuToggleLoop.js';\nimport './Item/AboutThisPlayer.js';\n\nimport CloseContextMenu from './CloseContextMenu';\n\nconst Menu = videojs.getComponent('Menu');\n\nclass ContextMenu extends Menu {\n  constructor(player, options) {\n    super(player, options);\n\n    this.addClass('vjs-context-menu');\n\n    this.hide();\n\n    this.player_.on('contextmenu', this.onContextmenu.bind(this));\n\n    const unbindWindowClickAction = addEventListener('click', this.handleClick.bind(this));\n\n    this.on('dispose', unbindWindowClickAction);\n  }\n\n  createEl(...args) {\n    const el = super.createEl(...args);\n\n    const layer = new CloseContextMenu(this.player_, {\n      menu: this\n    });\n\n    el.insertBefore(layer.el_, el.firstElementChild);\n\n    return el;\n  }\n\n  show(x, y) {\n    super.show();\n\n    this.el_.style.top = y + 'px';\n    this.el_.style.left = x + 'px';\n  }\n\n  onContextmenu(evt) {\n    evt.preventDefault();\n\n    const rect = this.player_.el().getBoundingClientRect();\n\n    const x = evt.pageX - rect.x;\n    const y = evt.pageY - rect.y;\n\n    this.show(x, y);\n  }\n\n  handleClick(evt) {\n    if (evt.button || evt.button === 0) {\n      if (evt.button !== 2) {\n        this.hide();\n      }\n    }\n  }\n}\n\nContextMenu.prototype.options_ = {\n  children: ['ContextMenuToggleLoop', 'AboutThisPlayer']\n};\n\nvideojs.registerComponent('ContextMenu', ContextMenu);\n\nvideojs.getComponent('Player').prototype.options_.children.push('ContextMenu');\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass CloseSettingMenu extends ClickableComponent {\n  buildCSSClass() {\n    return 'vjs-close-menu-layer vjs-close-setting-menu';\n  }\n\n  handleClick() {\n    this.options_.menu.menuButton_.hideMenu();\n  }\n}\n\nvideojs.registerComponent('CloseSettingMenu', CloseSettingMenu);\n\nexport default CloseSettingMenu;\n","import videojs from 'video.js';\n\nimport CloseSettingMenu from './CloseSettingMenu';\n\nconst Menu = videojs.getComponent('Menu');\n\nclass SettingMenu extends Menu {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      name: 'SettingMenu'\n    });\n\n    this.addClass('vjs-setting-menu');\n\n    setTimeout(this.reset.bind(this), 0);\n  }\n\n  reset() {\n    if (!this.contentEl_) {\n      return;\n    }\n\n    this.removeStyle();\n\n    const { offsetWidth: width, offsetHeight: height } = this.contentEl_;\n\n    this.origin = {\n      children: this.children().slice(0),\n      width,\n      height\n    };\n\n    this.resize({\n      width,\n      height\n    });\n\n    /**\n     *  Since the width of setting menu depends on screen width.\n     *  If player is initialized on small screen size then resize to a bigger screen,\n     *  the width of setting menu will be too wide as the origin width is affected by css,\n     *  A class `vjs-setting-menu-ready` as a condition for css on small screen,\n     *  therefore the origin width will not be affected.\n     */\n    this.addClass('vjs-setting-menu-ready');\n  }\n\n  createEl() {\n    const el = super.createEl();\n    const layer = new CloseSettingMenu(this.player_, {\n      menu: this\n    });\n\n    el.insertBefore(layer.el_, el.firstElementChild);\n\n    return el;\n  }\n\n  update(children = []) {\n    const children_ = this.children().slice(0);\n\n    children_.forEach(child => {\n      this.removeChild(child);\n    });\n\n    children.forEach(child => {\n      this.addChild(child);\n    });\n  }\n\n  resize({ width, height }) {\n    this.contentEl_.style.width = width + 'px';\n    this.contentEl_.style.height = height + 'px';\n  }\n\n  restore() {\n    this.resize(this.origin);\n\n    this.update(this.origin.children);\n  }\n\n  removeStyle() {\n    this.contentEl_.removeAttribute('style');\n  }\n\n  hide() {\n    // Disable default hide function\n    // As the default hide function violate the calculation of menu dimension\n  }\n}\n\nvideojs.registerComponent('SettingMenu', SettingMenu);\n\nexport default SettingMenu;\n","import videojs from 'video.js';\n\nconst MenuItem = videojs.getComponent('MenuItem');\n\nclass SettingMenuItem extends MenuItem {\n  constructor(player, options) {\n    super(\n      player,\n      videojs.mergeOptions(\n        {\n          selectable: false\n        },\n        options\n      )\n    );\n\n    this.menu = options.menu;\n  }\n}\n\nvideojs.registerComponent('SettingMenuItem', SettingMenuItem);\n\nexport default SettingMenuItem;\n","import videojs from 'video.js';\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingOnOffItem extends SettingMenuItem {\n  createEl() {\n    const options = this.options_;\n    const el = videojs.dom.createEl('li', {\n      className: 'vjs-menu-item vjs-setting-onoff-item',\n      innerHTML: `\n        <div class=\"vjs-icon-placeholder ${this.options_.icon || ''}\"></div>\n        <div>${this.localize(options.label)}</div>\n        <div class=\"vjs-spacer\"></div>\n        <div>\n          <div class=\"vjs-onoff-button\"></div>\n        </div>\n      `\n    });\n\n    return el;\n  }\n\n  update(active) {\n    this.active = typeof active === 'undefined' ? !this.active : active;\n\n    if (this.active) {\n      this.addClass('vjs-active');\n    } else {\n      this.removeClass('vjs-active');\n    }\n  }\n\n  handleClick() {\n    this.update();\n  }\n\n  selected() {}\n}\n\nvideojs.registerComponent('SettingOnOffItem', SettingOnOffItem);\n\nexport default SettingOnOffItem;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingSubOptionTitle extends SettingMenuItem {\n  constructor(player, options) {\n    super(player, options);\n\n    this.addChild('Component', {}, 0);\n    this.addClass('vjs-settings-sub-menu-item');\n    this.addClass('vjs-settings-sub-menu-title');\n  }\n\n  handleClick() {\n    this.options_.menu.restore();\n  }\n}\n\nvideojs.registerComponent('SettingSubOptionTitle', SettingSubOptionTitle);\n\nexport default SettingSubOptionTitle;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingSubOptionItem extends SettingMenuItem {\n  constructor(player, options) {\n    super(player, options);\n\n    this.selectable = true;\n\n    Object.assign(this, options);\n\n    this.addChild('Component', {}, 0);\n    this.addClass('vjs-settings-sub-menu-item');\n    this.addClass('vjs-settings-sub-menu-option');\n\n    this.update();\n  }\n\n  update() {\n    this.selected(this.value === this.parent.selected.value);\n  }\n\n  handleClick() {\n    this.parent.onChange(this.options_);\n    this.restore();\n  }\n\n  restore() {\n    this.menu.restore();\n  }\n}\n\nvideojs.registerComponent('SettingSubOptionItem', SettingSubOptionItem);\n\nexport default SettingSubOptionItem;\n","import videojs from 'video.js';\n\nconst SettingMenu = videojs.getComponent('SettingMenu');\n\nclass SettingMenuTemp extends SettingMenu {\n  constructor(player) {\n    super(player, {\n      name: 'SettingMenuTemp'\n    });\n  }\n}\n\nconst getMenuDimension = function(player, items) {\n  const tempMenu = new SettingMenuTemp(player);\n\n  tempMenu.update(items);\n\n  player.addChild(tempMenu);\n\n  const rect = tempMenu.contentEl_.getBoundingClientRect();\n\n  // remove subMenuItem form tempMenu first, otherwise they will also be disposed\n  tempMenu.update();\n  tempMenu.dispose();\n\n  // remove tempMenu in `player.children`\n  player.removeChild(tempMenu);\n\n  return rect;\n};\n\nexport default getMenuDimension;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\nimport SettingSubOptionTitle from './SettingSubOptionTitle.js';\nimport SettingSubOptionItem from './SettingSubOptionItem.js';\nimport getMenuDimension from '../MenuDimension';\n\n/**\n * @param {Array<Object|number|string>} entries\n */\nfunction parseEntries(entries, selectedIndex) {\n  entries = entries.map((data, index) => {\n    if (data !== null && typeof data !== 'object') {\n      data = {\n        value: data,\n        label: data\n      };\n    }\n\n    let isDefault = false;\n    if (typeof selectedIndex === 'undefined' && typeof data.default !== 'undefined') {\n      isDefault = true;\n      selectedIndex = index;\n    }\n\n    return {\n      ...data,\n      index,\n      default: isDefault\n    };\n  });\n\n  return {\n    entries,\n    selected: entries[selectedIndex || 0]\n  };\n}\n\nclass SettingOptionItem extends SettingMenuItem {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.setEntries(this.options_.entries);\n\n    if (!this.entries.length) {\n      this.hide();\n    }\n  }\n\n  createEl() {\n    const { icon, label } = this.options_;\n    const el = videojs.dom.createEl('li', {\n      className: 'vjs-menu-item vjs-setting-menu-item',\n      innerHTML: `\n        <div class=\"vjs-icon-placeholder ${icon || ''}\"></div>\n        <div class=\"vjs-setting-menu-label\">${this.localize(label)}</div>\n        <div class=\"vjs-spacer\"></div>\n      `\n    });\n\n    this.selectedValueEl = videojs.dom.createEl('div', {\n      className: 'vjs-setting-menu-value'\n    });\n\n    el.appendChild(this.selectedValueEl);\n\n    return el;\n  }\n\n  setEntries(entries_ = [], selectedIndex) {\n    Object.assign(this, parseEntries(entries_, selectedIndex));\n\n    this.updateSelectedValue();\n\n    const SubOptionItem = videojs.getComponent(`${this.name_}Child`) || SettingSubOptionItem;\n\n    this.subMenuItems = this.entries.map(({ label, value }, index) => {\n      return new SubOptionItem(this.player_, {\n        index,\n        label,\n        value,\n        parent: this,\n        menu: this.menu\n      });\n    });\n\n    this.subMenuItems.splice(\n      0,\n      0,\n      new SettingSubOptionTitle(this.player_, {\n        label: this.options_.label,\n        menu: this.menu\n      })\n    );\n  }\n\n  handleClick() {\n    const dimensions = getMenuDimension(this.player_, this.subMenuItems);\n\n    this.menu.update(this.subMenuItems);\n    this.menu.resize(dimensions);\n  }\n\n  select(index) {\n    this.selected = this.entries[index];\n  }\n\n  update() {\n    this.updateSelectedValue();\n\n    this.subMenuItems.forEach(function(item) {\n      item.update && item.update();\n    });\n  }\n\n  onChange({ index }) {\n    this.select(index);\n    this.update(index);\n  }\n\n  updateSelectedValue() {\n    if (this.selected) {\n      this.selectedValueEl.innerHTML = this.localize(this.selected.label);\n    }\n  }\n\n  show() {\n    super.show();\n    this.menu.reset();\n  }\n}\n\nvideojs.registerComponent('SettingOptionItem', SettingOptionItem);\n\nexport default SettingOptionItem;\n","import videojs from 'video.js';\nimport SettingOptionItem from '../Item/SettingOptionItem.js';\n\nclass PlaybackRateSettingItem extends SettingOptionItem {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      label: 'Speed',\n      icon: 'vjs-icon-slow-motion-video',\n      entries: [\n        0.5,\n        0.75,\n        {\n          label: 'Normal',\n          value: 1,\n          default: true\n        },\n        1.25,\n        1.5,\n        2\n      ]\n    });\n\n    this.addClass('vjs-setting-playback-rate');\n\n    // Since playback rate will be reset to noraml when video source changed\n    // So we need to listen on `ratechange`\n    player.on('ratechange', () => {\n      const rate = player.playbackRate();\n      const index = this.entries.findIndex(({ value }) => rate === value);\n\n      if (index > -1) {\n        this.select(index);\n        this.update(index);\n      } else {\n        videojs.log.warn('Incorrect playbackRate value, setting menu will not updated');\n      }\n    });\n  }\n\n  onChange({ value }) {\n    this.player_.playbackRate(value);\n  }\n}\n\nvideojs.registerComponent('PlaybackRateSettingItem', PlaybackRateSettingItem);\n\nexport default PlaybackRateSettingItem;\n","import videojs from 'video.js';\nimport SettingMenu from './SettingMenu.js';\n\nimport './Item/SettingOnOffItem';\nimport './Item/SettingOptionItem.js';\nimport './PlaybackRate/PlaybackRateSettingItem.js';\nimport './Setting.scss';\n\nconst MenuButton = videojs.getComponent('MenuButton');\n\nclass SettingMenuButton extends MenuButton {\n  constructor(player, options) {\n    super(player, options);\n\n    // move menu to player\n    player.addChild(this.menu);\n    // remove videojs parent child relationship between button and menu\n    this.removeChild(this.menu);\n\n    player.on('playerresize', () => {\n      this.menu.reset();\n    });\n  }\n\n  buildCSSClass() {\n    return `vjs-setting-button ${super.buildCSSClass()}`;\n  }\n\n  buildWrapperCSSClass() {\n    return `vjs-setting-button ${super.buildWrapperCSSClass()}`;\n  }\n\n  createMenu() {\n    const menu = new SettingMenu(this.player_, {\n      menuButton: this\n    });\n    const entries = this.options_.entries || [];\n\n    entries.forEach(component => {\n      menu.addChild(component, {\n        menu\n      });\n    });\n\n    return menu;\n  }\n\n  hideMenu() {\n    this.unpressButton();\n    this.el_.blur();\n  }\n\n  unpressButton() {\n    super.unpressButton();\n\n    this.player_.removeClass('vjs-keep-control-showing');\n\n    this.menu.restore();\n  }\n\n  handleClick() {\n    this.player_.addClass('vjs-keep-control-showing');\n\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n\n    this.off(document.body, 'click', this.hideMenu);\n    // this.off(document.body, 'touchend', this.hideMenu);\n\n    setTimeout(() => {\n      this.one(document.body, 'click', this.hideMenu);\n      // _this.buttonPressed_ && _this.one(document.body, 'touchend', _this.hideMenu);\n    }, 0);\n  }\n}\n\nSettingMenuButton.prototype.controlText_ = 'Settings';\nSettingMenuButton.prototype.options_ = {\n  entries: ['PlaybackRateSettingItem']\n};\n\nvideojs.registerComponent('SettingMenuButton', SettingMenuButton);\n\nexport default SettingMenuButton;\n"],"names":["findChild","parent","name","result","children","childIndex_","Object","keys","length","componentId","component","name_","push","index","children_","indexOf","videojs","getComponent","prototype","browser","IS_IPHONE","IOS_VERSION","TOUCH_ENABLED","hook","vjsPlayer","playsinline","options_","addClass","removeClass","Component","ControlBar","ControlSeparator","player","options","className","registerComponent","_","slice","splice","enableMobileView","mobileView","matchDimension","value","window","matchMedia","matches","innerWidth","controlBar","hide","one","events","callback","off","show","userActive","SeekBar","getPercent","time","player_","currentTime","percent","duration","handleMouseMove","event","dom","isSingleLeftClick","newTime","calculateDistance","update","on","ready","controls","Title","title_","playerOptions","title","createEl","el","contentEl_","appendChild","cache_","innerHTML","videoTitle","getChild","registerPlugin","PlayToggleButton","ClickableComponent","PlayToggleLayer","handleClick","evt","paused","call","playerChildren","loadSpinnerIndex","listener","target","Array","isArray","forEach","addEventListener","removeEventListener","MenuItem","ContextMenuItem","selectable","controlText","label","args","insertAdjacentHTML","icon","ContextMenu","ContextMenuToggleLoop","bind","selected","loop","AboutThisPlayer","open","CloseContextMenu","buildCSSClass","menu","Menu","onContextmenu","unbindWindowClickAction","layer","insertBefore","el_","firstElementChild","x","y","style","top","left","preventDefault","rect","getBoundingClientRect","pageX","pageY","button","CloseSettingMenu","menuButton_","hideMenu","SettingMenu","setTimeout","reset","removeStyle","width","offsetWidth","height","offsetHeight","origin","resize","child","removeChild","addChild","restore","removeAttribute","SettingMenuItem","mergeOptions","SettingOnOffItem","localize","active","SettingSubOptionTitle","SettingSubOptionItem","assign","onChange","SettingMenuTemp","getMenuDimension","items","tempMenu","dispose","parseEntries","entries","selectedIndex","map","data","isDefault","default","SettingOptionItem","setEntries","selectedValueEl","entries_","updateSelectedValue","SubOptionItem","subMenuItems","dimensions","select","item","PlaybackRateSettingItem","rate","playbackRate","findIndex","log","warn","MenuButton","SettingMenuButton","buildWrapperCSSClass","createMenu","menuButton","unpressButton","blur","buttonPressed_","pressButton","document","body","controlText_"],"mappings":"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"}