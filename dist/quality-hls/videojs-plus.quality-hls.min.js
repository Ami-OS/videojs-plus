!function(e){"use strict";function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},t.apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var n="default"in e?e.default:e,i=e.getComponent("SettingMenuItem"),a=function(e){function i(t,l){var n;return n=e.call(this,t,Object.assign(l,{name:"QualityItem",label:"Quality",icon:"vjs-icon-hd",entries:l.quality||[]}))||this,n.addClass("vjs-setting-quality"),n.levels=[],n.handleAllLevelsAdded(),n}l(i,e);var a=i.prototype;return a.handleAllLevelsAdded=function(){var e=this,t=this.player_;if(!t.qualityLevels)return n.log.warn("plugin videojs-contrib-quality-levels do not exsits"),!1;var l,i=t.qualityLevels(),a=[];i.on("addqualitylevel",function(n){var i=n.qualityLevel;clearTimeout(l),a.push(i);var o=function(){e.levels=a.slice(0),t.trigger("before-quality-setup",{levels:e.levels}),e.onAllLevelsAdded(),a=[]};l=setTimeout(o,10)})},a.onAllLevelsAdded=function(){var e=this,t=this.levels.map(function(t){var l=t.height;return{label:e.localize(l+"p"),value:l,defalut:!1}}).sort(function(e,t){return t.value-e.value}).concat({label:"Auto",value:"auto",defalut:!0});this.setEntries(t),this.show(),this.player_.trigger("quality")},a.update=function(l){e.prototype.update.call(this,l);var n=l.value;this.levels.forEach(function(e){e.enabled=e.height===n||"auto"===n}),this.player_.trigger("qualitychange",this.entries.reduce(function(e,l,i){return l.value===n?t({index:i},l):e},{}))},i}(i);e.getComponent("SettingMenuButton").prototype.options_.entries.push("QualityHlsItem"),e.registerComponent("QualityHlsItem",a)}(videojs);
