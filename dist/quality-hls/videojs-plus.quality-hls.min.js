!function(e){"use strict";function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r,o="default"in e?e.default:e,u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s={},a=void 0!==u?u:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=a["__GLOBAL_DOCUMENT_CACHE@4"])||(r=a["__GLOBAL_DOCUMENT_CACHE@4"]=s);var d=r,v=function e(t){var n=this;if(o.browser.IS_IE8){n=d.createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n},c=function(e){function t(){var n;n=e.call(this)||this;var i=l(l(n));if(o.browser.IS_IE8){i=d.createElement("custom");for(var r in t.prototype)"constructor"!==r&&(i[r]=t.prototype[r])}return i.levels_=[],i.selectedIndex_=-1,Object.defineProperty(i,"selectedIndex",{get:function(){return i.selectedIndex_}}),Object.defineProperty(i,"length",{get:function(){return i.levels_.length}}),i||l(n)}i(t,e);var n=t.prototype;return n.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new v(e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},n.removeQualityLevel=function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},n.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null},n.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(o.EventTarget);c.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var p in c.prototype.allowedEvents_)c.prototype["on"+p]=null;var f=o.registerPlugin||o.plugin,h=function(e,t){var n=e.qualityLevels,i=new c,l=function t(){i.dispose(),e.qualityLevels=n,e.off("dispose",t)};return e.on("dispose",l),e.qualityLevels=function(){return i},e.qualityLevels.VERSION="2.0.9",i},y=function(e){return h(this,o.mergeOptions({},e))};f("qualityLevels",y),y.VERSION="2.0.9";var g=e.getComponent("SettingMenuItem"),_=function(e){function i(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,{name:"QualityItem",label:"Quality",icon:"vjs-icon-hd",entries:n.quality||[]})||this,i.addClass("vjs-setting-quality"),i.levels=[],i.handleAllLevelsAdded(),i}n(i,e);var l=i.prototype;return l.handleAllLevelsAdded=function(){var e=this,t=this.player_;if(!t.qualityLevels)return o.log.warn("plugin videojs-contrib-quality-levels do not exsits"),!1;var n,i=t.qualityLevels(),l=[];i.on("addqualitylevel",function(i){var r=i.qualityLevel;clearTimeout(n),l.push(r);var o=function(){e.levels=l.slice(0),t.trigger("before-quality-setup",{levels:e.levels}),e.onAllLevelsAdded(),l=[]};n=setTimeout(o,10)})},l.onAllLevelsAdded=function(){var e=this,t=this.levels.map(function(t){var n=t.height;return{label:e.localize(n+"p"),value:n,defalut:!1}}).sort(function(e,t){return t.value-e.value}).concat({label:"Auto",value:"auto",defalut:!0});this.setEntries(t),this.show(),this.player_.trigger("quality")},l.update=function(n){e.prototype.update.call(this,n);var i=n.value;this.levels.forEach(function(e){e.enabled=e.height===i||"auto"===i}),this.player_.trigger("qualitychange",this.entries.reduce(function(e,n,l){return n.value===i?t({index:l},n):e},{}))},i}(g);e.getComponent("SettingMenuButton").prototype.options_.entries.push("QualityHlsItem"),e.registerComponent("QualityHlsItem",_),e.registerPlugin("qualityLevels",y)}(videojs);
